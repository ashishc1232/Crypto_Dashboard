<div class="bg-white p-6 rounded shadow">
      <div *ngIf="loading" class="text-center py-6">Loading coin...</div>
      <div *ngIf="error" class="text-red-600">{{error}}</div>

      <div *ngIf="coin">
        <div class="flex items-center justify-between">
          <div class="flex items-center gap-4">
            <img [src]="coin.image.thumb" width="48" height="48" />
            <div>
              <div class="text-2xl font-bold">{{coin.name}} <span class="text-sm text-slate-500">{{coin.symbol | uppercase}}</span></div>
              <div class="text-sm text-slate-500">Market rank: #{{coin.market_cap_rank}}</div>
            </div>
          </div>
          <div class="space-x-2">
            <button (click)="toggleFav()" class="px-3 py-1 border rounded">
              {{favSvc.isFav(coin.id) ? 'Unfavorite' : 'Add to Favorites'}}
            </button>
            <a routerLink="/" class="px-3 py-1 border rounded">Back</a>
          </div>
        </div>

        <div class="mt-6 grid md:grid-cols-3 gap-6">
          <div class="md:col-span-2">
            <div class="bg-slate-50 p-4 rounded">
              <canvas id="priceChart" height="160"></canvas>
            </div>
            <div class="mt-4 text-sm text-slate-600">
              <div [innerHTML]="coin.description.en ? (coin.description.en | slice:0:400) + (coin.description.en.length>400 ? '...' : '') : 'No description'"></div>
            </div>
          </div>
          <aside>
            <div class="bg-slate-50 p-4 rounded">
              <div class="text-sm text-slate-500">Current Price</div>
              <div class="text-2xl font-semibold">${{coin.market_data.current_price.usd | number:'1.2-2'}}</div>
              <div class="mt-4 text-sm">
                <div>24h change: <span [ngClass]="coin.market_data.price_change_percentage_24h >=0 ? 'text-emerald-600' : 'text-rose-600'">{{coin.market_data.price_change_percentage_24h | number:'1.2-2'}}%</span></div>
                <div class="mt-2">Market Cap: ${{coin.market_data.market_cap.usd | number}}</div>
                <div class="mt-2">Circulating: {{coin.market_data.circulating_supply | number}}</div>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>